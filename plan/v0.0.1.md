# VSCode Semantic Search Extension

## Overview

Build a VSCode extension that provides semantic search capabilities and integrates with GitHub Copilot through the Language Model Tool API.

## Core Features

### Build Index
- Index workspace files with embedding vectors
- Store embeddings and metadata for efficient retrieval

### Search
- Accept natural language queries from agents
- Return relevant files and code snippets

## Architecture

### Technology Stack
- **ChromaDB**: Embedding storage and vector search
- **DuckDB**: Metadata persistence
- **TypeScript**: Extension implementation

### Storage Layers
- **User-level**: Store all indices, configuration and metadata files

- **Workspace-level**: Store all indices, configuration and metadata files for workspace specific data if user asked. P1

## P1 Features (MVP)

1. **Build Index Command**
   - Select files/folders to index
   - Track indexing progress

2. **Index Sidebar**
   - View indexed files
   - Monitor index status

3. **File Tracking**
   - Store MD5 hash per indexed file
   - Detect stale indices

4. **ChromaDB Schema**
   - File path
   - Line range (format: `line:start-line:end`)
   - File ID

5. **DuckDB Schema**
   - File ID
   - File path
   - Workspace path
   - MD5 hash
   - Last indexed timestamp

6. **Search Command**
   - Query input interface
   - Return ranked results with file paths and snippets

7. **Delete Index Command**
   - Remove index for specific files
   - Remove index for entire folders

## P2 Features (Future)

1. **Incremental Indexing**
   - Update only changed files
   - Efficient index maintenance

2. **Multi-Workspace Support**
   - Manage indices across multiple workspaces
   - Workspace isolation

3. **Local Embedding Model**
   - Use transformer.js for on-device embedding
   - Integrate Qwen model for local execution
   - Reduce dependency on external APIs

4. **Search Sidebar**
   - Dedicated semantic search panel
   - Interactive query interface
   - Result preview and navigation

## Integration Points

- Language Model Tool API for GitHub Copilot
- VSCode extension API for commands and UI
- File system watchers for change detection
